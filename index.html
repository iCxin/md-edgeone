<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="keywords" content="md,markdown,markdown-editor,wechat,official-account,yanglbme,doocs,cxin,md-edgeone" />
    <meta name="description" content="微信Markdown编辑器 | www.cxin.net魔改版 - 一款高度简洁的微信 Markdown 编辑器" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <title>微信Markdown编辑器 | www.cxin.net魔改版</title>
    <link rel="shortcut icon" href="https://cdn-doocs.oss-cn-shenzhen.aliyuncs.com/gh/doocs/md/images/favicon.png" />
    <link
      rel="apple-touch-icon-precomposed"
      href="https://cdn-doocs.oss-cn-shenzhen.aliyuncs.com/gh/doocs/md/images/1648303220922-7e14aefa-816e-44c1-8604-ade709ca1c69.png"
    />
    <style>
      .loading {
        position: fixed;
        top: 0;
        left: 0;
        z-index: 99999;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        width: 100vw;
        height: 100vh;
        font-size: 18px;
      }

      .loading::before {
        content: url('https://cdn-doocs.oss-cn-shenzhen.aliyuncs.com/gh/doocs/md/images/favicon.png');
        width: 100px;
        height: 100px;
        margin-bottom: 26px;
      }

      .loading.dark {
        color: #ffffff;
        background-color: #141414;
      }

      .loading .txt {
        position: absolute;
        bottom: 10%;
      }

      .loading .txt::after {
        content: '...';
        animation: dots 1.5s steps(4, end) infinite;
      }

      @keyframes dots {
        0% {
          content: ' ';
        }
        25% {
          content: '.';
        }
        50% {
          content: '..';
        }
        75% {
          content: '...';
        }
      }

      /* 数学公式样式优化 - 完整版本 */
      /* 行内公式样式 */
      .katex-inline {
        display: inline-block;
        max-width: 100%;
        overflow-x: auto;
        overflow-y: hidden;
        white-space: nowrap;
        vertical-align: middle;
        margin: 0 2px;
        padding: 2px 4px;
        border-radius: 3px;
        background: rgba(0, 0, 0, 0.02);
        -webkit-overflow-scrolling: touch;
        scrollbar-width: thin;
        scrollbar-color: #ccc transparent;
      }

      /* 块级公式样式 */
      .katex-block {
        display: block;
        max-width: 100%;
        overflow-x: auto;
        overflow-y: hidden;
        padding: 12px 8px;
        margin: 1em 0;
        text-align: center;
        background: rgba(0, 0, 0, 0.02);
        border-radius: 4px;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: thin;
        scrollbar-color: #ccc transparent;
      }

      /* 滚动条样式 */
      .katex-inline::-webkit-scrollbar,
      .katex-block::-webkit-scrollbar {
        height: 6px;
        width: 6px;
      }

      .katex-inline::-webkit-scrollbar-track,
      .katex-block::-webkit-scrollbar-track {
        background: transparent;
        border-radius: 3px;
      }

      .katex-inline::-webkit-scrollbar-thumb,
      .katex-block::-webkit-scrollbar-thumb {
        background: #ccc;
        border-radius: 3px;
        transition: background 0.3s ease;
      }

      .katex-inline::-webkit-scrollbar-thumb:hover,
      .katex-block::-webkit-scrollbar-thumb:hover {
        background: #999;
      }

      /* 公式容器内SVG样式 */
      .katex-inline svg,
      .katex-block svg {
        display: inline-block !important;
        max-width: none !important;
        min-width: auto !important;
        width: auto !important;
        height: auto !important;
        flex-shrink: 0 !important;
        font-size: inherit !important;
      }

      /* 统一公式字体大小 */
      .katex-inline {
        font-size: 1em !important;
        line-height: 1.4;
      }

      .katex-block {
        font-size: 1.05em !important;
        line-height: 1.5;
      }

      /* 兼容MathJax的katex样式 */
      .math-formula {
        overflow-x: auto;
        padding: 8px 0;
        white-space: nowrap;
        max-width: 100%;
        -webkit-overflow-scrolling: touch;
      }

      .katex-display {
        overflow-x: auto;
        overflow-y: hidden;
        padding: 8px 0;
        white-space: nowrap;
        max-width: 100%;
        -webkit-overflow-scrolling: touch;
      }

      .katex {
        font-size: 1.1em !important;
      }

      .katex-display .katex {
        font-size: 1.2em !important;
      }

      /* 暗色主题适配 */
      body.dark .katex-inline,
      body.dark .katex-block {
        background: rgba(255, 255, 255, 0.05);
      }

      body.dark .katex-inline::-webkit-scrollbar-thumb,
      body.dark .katex-block::-webkit-scrollbar-thumb {
        background: #666;
      }

      body.dark .katex-inline::-webkit-scrollbar-thumb:hover,
      body.dark .katex-block::-webkit-scrollbar-thumb:hover {
        background: #999;
      }
    </style>
  </head>

  <body>
    <noscript>
      <strong>Please enable JavaScript to continue.</strong>
    </noscript>
    <div id="app">
      <div class="loading">
        <strong>致力于让 Markdown 编辑更简单</strong>
        <p class="txt">正在加载编辑器</p>
        <p class="timeout-tip" style="display: none; color: #e53935; font-size: 16px; margin-top: 2em">
          加载时间过长，请尝试刷新页面或按 F12 查看控制台是否有异常信息
        </p>
      </div>
    </div>
    <script>
      const theme = localStorage.getItem('vueuse-color-scheme')
      if (theme === 'dark' || (theme === 'auto' && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.querySelector('.loading').classList.add('dark')
      }

      setTimeout(() => {
        const tip = document.querySelector('.loading .timeout-tip')
        if (tip) {
          tip.style.display = 'block'
        }
      }, 30000)
    </script>
    <script>
      window.MathJax = {
        tex: { tags: 'ams' },
        svg: { fontCache: 'none' },
        startup: {
          ready() {
            console.log('MathJax已加载并准备就绪');
            MathJax.startup.defaultReady();
          }
        }
      }
    </script>
    <script
      id="MathJax-script"
      src="https://cdn-doocs.oss-cn-shenzhen.aliyuncs.com/npm/mathjax@3/es5/tex-svg.js"
    ></script>
    <script src="https://cdn-doocs.oss-cn-shenzhen.aliyuncs.com/npm/mermaid@11/dist/mermaid.min.js"></script>
    <script type="module" src="/apps/web/src/main.ts"></script>
    <script type="module" src="/apps/web/src/sidepanel.ts"></script>
  </body>
  <script src="https://cdn-doocs.oss-cn-shenzhen.aliyuncs.com/gh/wechatsync/article-syncjs@latest/dist/main.js"></script>
</html>